<div class="modal-backdrop" (click)="onBackdropClick($event)">
    <div class="modal-content">
        <div class="close">
            <button class="close-button" (click)="fecharModal()" aria-label="Fechar">
                &times;
            </button>
        </div>
        <div class="modal-header">
            <h2 class="modal-title">Criar Conta</h2>
            <p>
                Preencha seus dados para criar uma conta e aproveitar nossos serviços.
            </p>
        </div>

        <div class="modal-body">
            <form [formGroup]="registroForm" (ngSubmit)="fazerRegistro()">
                <div class="section-form">
                    <div class="section-infos">
                        <h3 class="section-title">Informações Pessoais</h3>
                        <!-- Nome -->
                        <div class="form-group">
                            <label for="nome" class="form-label">Nome Completo</label>
                            <input type="text" id="nome" formControlName="nome" class="form-input"
                                placeholder="Seu nome completo" required>
                        </div>

                        <!-- Email -->
                        <div class="form-group">
                            <label for="email" class="form-label">E-mail</label>
                            <input type="email" id="email" formControlName="email" class="form-input"
                                placeholder="seu@email.com" required>
                        </div>

                        <!-- Senha -->
                        <div class="form-group">
                            <label for="senha" class="form-label">Senha</label>
                            <input type="password" id="senha" formControlName="senha" class="form-input"
                                placeholder="Mínimo de 6 caracteres" required>
                        </div>

                        <!-- Confirmar senha -->
                        <div class="form-group">
                            <label for="confirmarSenha" class="form-label">Confirmar Senha</label>
                            <input type="password" id="confirmarSenha" formControlName="confirmarSenha"
                                class="form-input" placeholder="Repita sua senha" required>
                            <div *ngIf="registroForm.errors?.['senhasNaoCoincidem'] && registroForm.get('confirmarSenha')?.touched"
                                class="error-message">
                                As senhas não coincidem.
                            </div>
                        </div>

                        <!-- Telefone -->
                        <div class="form-group-row">
                            <div class="form-group" style="width: 25%;">
                                <label for="codArea" class="form-label">DDD</label>
                                <input type="text" id="codArea" formControlName="codArea" class="form-input"
                                    placeholder="63" required>
                            </div>
                            <div class="form-group" style="flex: 1;">
                                <label for="numeroTelefone" class="form-label">Telefone</label>
                                <input type="text" id="numeroTelefone" formControlName="numeroTelefone"
                                    class="form-input" placeholder="99999-9999" required>
                            </div>
                        </div>
                    </div>

                    <div class="section-endereco">
                        <h3 class="section-title">Endereço Principal</h3>
                        <div class="form-group">
                            <label for="cep" class="form-label">CEP</label>
                            <input type="text" id="cep" formControlName="cep" class="form-input" placeholder="00000-000"
                                required>
                        </div>

                        <div class="form-group">
                            <label for="logradouro" class="form-label">Logradouro</label>
                            <input type="text" id="logradouro" formControlName="logradouro" class="form-input"
                                placeholder="Ex: Rua das Flores" required>
                        </div>

                        <div class="form-group-row">
                            <div class="form-group" style="width: 30%;">
                                <label for="numeroEndereco" class="form-label">Número</label>
                                <input type="text" id="numeroEndereco" formControlName="numeroEndereco"
                                    class="form-input" placeholder="123" required>
                            </div>
                            <div class="form-group" style="flex: 1;">
                                <label for="complemento" class="form-label">Complemento (Opcional)</label>
                                <input type="text" id="complemento" formControlName="complemento" class="form-input"
                                    placeholder="Apto, Bloco, etc.">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="bairro" class="form-label">Bairro</label>
                            <input type="text" id="bairro" formControlName="bairro" class="form-input"
                                placeholder="Nome do bairro" required>
                        </div>

                        <div class="form-group">
                            <label for="idMunicipio" class="form-label">Município</label>
                            <select id="idMunicipio" formControlName="idMunicipio" class="form-input" required>
                                <option [ngValue]="null" disabled>Selecione sua cidade</option>
                                <option [ngValue]="1">Porto Nacional - TO</option>
                                <option [ngValue]="4">Palmas - TO</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button type="submit" class="login-button" [disabled]="carregando || registroForm.invalid">
                    <span *ngIf="carregando" class="spinner"></span>
                    {{ carregando ? 'Criando...' : 'Criar Conta' }}
                </button>
            </form>

            <div class="register-section">
                <p class="register-text">Já tem uma conta?</p>
                <button type="button" class="register-button" (click)="irParaLogin()">
                    Fazer Login
                </button>
            </div>
        </div>
    </div>
</div>